(function($){if($.price===undefined)$.price={};var defStyle={decChar:'.',sepChar:',',currency:'$',prependCur:true,decPlaces:2,sepPlaces:3}
$.extend($.price,{defStyle:defStyle,ccToFmt:{'CAD':$.extend({},defStyle,{currency:'CDN$ '}),'EUR':$.extend({},defStyle,{decChar:',',sepChar:'.',currency:'EUR '}),'GBP':$.extend({},defStyle,{currency:'&pound;'}),'JPY':$.extend({},defStyle,{currency:'&#xFFE5; ',decPlaces:0}),'USD':$.extend({},defStyle)}});function priceToString(number,cc){if(null===number)return'';var ret='';var info=$.price.ccToFmt[cc];var sign=(number<0)?'-':'';number=Math.abs(number).toFixed(info.decPlaces);var parts=number.split('.');for(var i=0;i<parts[0].length;i++){if(i&&i%info.sepPlaces==0)ret=info.sepChar+ret;ret=parts[0].charAt(parts[0].length-1-i)+ret;}
ret=ret+((parts.length==2)?info.decChar+parts[1]:'');ret=sign+((info.prependCur)?info.currency+ret:ret+info.currency);return ret;}
function stringToPrice(string,cc){if(string.length==0)return null;var info=$.price.ccToFmt[cc];var parts=string.replace(info.currency,'').split(info.decChar);parts[0]=parts[0].replace(/\D/g,'');var price=parts[0].length>0?parseInt(parts[0]):null;if(parts.length==2){parts[1]=parts[1].replace(/\D/g,'');if(parts[1].length){if(price==null)price=0;price+=parseInt(parts[1])/Math.pow(10,parts[1].length);}}
return price;}
$.fn.price=function(value,currency){currency=currency||$.price.currencyCode||'USD';if(value===undefined)
if(this.length)return stringToPrice(this.eq(0).html(),currency);else return null;else{return this.each(function(){$(this).html(priceToString(value,currency));});}};if(window.amznJQ&&amznJQ.declareAvailable)amznJQ.declareAvailable('priceformatterJQ');})(jQuery);