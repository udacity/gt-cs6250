var NYTD=window.NYTD||{};NYTD.Subscription||(NYTD.Subscription=function(){var e={},t={},n=function(){};return n(),e.subscribe=function(e,n){function r(){var r={type:e,listener:n};null==t[e]&&(t[e]=[]),t[e].push(r)}if(this.hasSubscriber(e,n))return;return r.apply(this),n},e.notify=function(e,n){function r(){var r=0,i=t[e],s=i.length;for(r;r<s;r++)try{i[r].listener(n)}catch(o){}}return typeof n!="object"&&(n={}),null==t[e]?!1:(r.apply(this),this)},e.hasSubscriber=function(e,n){if(null==t[e])return!1;var r=0,i=t[e],s=i.length,o=!1;for(r;r<s;r++){var u=i[r].listener;u&&u.prototype&&u.prototype.constructor&&(u=u.prototype.constructor),n&&n.prototype&&n.prototype.constructor&&(n=n.prototype.constructor);if(String(u)===String(n)){o=!0;break}}return o},e.cancel=function(e,n){function r(){var r=0,i=t[e],s=i.length;for(r;r<s;r++){var o=i[r].listener;o&&o.prototype&&o.prototype.constructor&&(o=o.prototype.constructor),n&&n.prototype&&n.prototype.constructor&&(n=n.prototype.constructor),String(o)===String(n)&&t[e].splice(r,1)}}return this.hasSubscriber(e,n)?(r.apply(this),this):!1},e});var NYTD=window.NYTD||{};(function(){function u(){this.Video=this.Video||{},this.Video.$=NYTD.jQuery||window.jQuery,this.Video.CACHE_SCRIPT_LOAD=!0,this.Video.Ad=this.Video.Ad||{},this.Video.Ad.Controller=this.Video.Ad.Controller||{},this.Video.Ad.Model=this.Video.Ad.Model||{},this.Video.Player=this.Video.Player||{},this.Video.DEPENDENCY_LOAD_CHECK_INTERVAL=50,this.Video.Libs=this.Video.Libs||{},this.Video.Metrics=this.Video.Metrics||{},this.Video.Ad.SERVER_DEVELOPMENT="http://www-video.dev.lga1.nytimes.com",this.Video.Ad.SERVER_STAGING="http://video.stg.ewr1.nytimes.com",this.Video.Ad.SERVER_PRODUCTION="http://www.nytimes.com",this.Video.Log=this.Video.Log||{},this.Video.Log.Levels={DEBUG:0,INFO:1,WARN:2,ERROR:3,NONE:4},this.Video.Log.Level=NYTD.env==="production"||NYTD.env==="staging"?this.Video.Log.Levels.NONE:this.Video.Log.Levels.DEBUG,this.Video.BaseURL=e}function a(){this.Libs.JQUERY_IS_LOADED=!1,this.Libs.jQuery="http://js.nyt.com/js/app/lib/jquery/jquery-1.6.2.js",this.Libs.Brightcove="http://admin.brightcove.com/js/BrightcoveExperiences_All.js",this.Libs.Underscore="http://js.nyt.com/js/app/lib/underscore/underscore.js",this.Libs.Backbone="http://js.nyt.com/js/app/lib/backbone/backbone.js",this.Libs.GoogleJSAPI="http://s0.2mdn.net/instream/html5/ima3.js",this.Libs.VideoManager=e+"/js2/build/video/2.0/videomanager.2.0.js"}function f(){this.Validation={isEmpty:function(e){return typeof e=="undefined"||null===e||e===""},isFunction:function(e){return typeof e=="function"},isString:function(e){return typeof e=="string"},isProduction:function(){return NYTD.env&&NYTD.env==="production"},isIOS:function(){return(new RegExp("ipod|ipad|itouch|iphone","igm")).test(navigator.userAgent)},isAndroid:function(){return(new RegExp("android","igm")).test(navigator.userAgent)},isTouchable:function(){return"createTouch"in document},isLocalDomain:function(e){return e=e||window.location.href.toString(),/(http:\/\/)?(s?www\.)?([^\.]\.)?nytimes.com/.test(e)},hasFlash:function(){var e=!1,t="application/x-shockwave-flash",n=navigator.plugins,r=navigator.mimeTypes,i=null;if(this.isIOS())return!1;if(n&&n.length>0)r&&r[t]&&r[t].enabledPlugin&&r[t].enabledPlugin.description&&(e=!0);else if(window.ActiveXObject){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(s){return!1}i&&(e=!0)}return e}}}function l(){this.Sanitizer={cleanCDATA:function(e){return typeof e=="undefined"||null===e||""===e?"":e.replace("<!--[CDATA[","").replace("]]-->","").replace("[timestamp]",(new Date).getTime())},trim:function(e){return e.replace(/^\s+|\s+$/g,"")}}}function c(){this.Utils={callbacks:[],queryParams:null,scriptCache:[],loadInterval:0,getDeviceType:function(){var e=null,t=navigator.userAgent.toLowerCase(),n=[["android","android"],["ipad","ipad"],["iphone","iphone"],["other mobile","(touchpad|blackberry|nokia|windows phone|opera mobi)"]];for(var r=0;r<n.length;r++){var i=new RegExp(n[r][1]),s=t.match(i);s!==null&&(e=n[r][0])}return e||"desktop"},generateCallbackName:function(e){var t="video_lib_"+(new Date).getTime()+"_"+e;return this.callbacks[t]===!0?(this.generateCallbackName(e),!1):(this.callbacks[t]=!0,t)},getQueryParams:function(){if(NYTD.Video.Validation.isEmpty(this.queryParams)){var e=this,t=window.location.search;this.queryParams={};var n=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return t.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(t,r,i,s){r&&s&&(e.queryParams[n(r)]=n(s))}),this.queryParams}return this.queryParams},getScript:function(e,t,n){NYTD.Video.$.ajax({type:"GET",url:e,success:t,dataType:"script",cache:n||NYTD.Video.CACHE_SCRIPT_LOAD})},loadJQuery:function(e){if(NYTD.Video.Libs.JQUERY_IS_LOADED)e();else{var t=this;if(NYTD.jQuery||window.jQuery)NYTD.Video.$=NYTD.jQuery||window.jQuery,window.jQuery||(window.jQuery=NYTD.Video.$),NYTD.Video.Libs.JQUERY_IS_LOADED=!0,e(!0);else{var n=document.createElement("script");n.src=NYTD.Video.Libs.jQuery,this.loadInterval=setInterval(function(){window.jQuery&&(clearInterval(t.loadInterval),NYTD.Video.$=jQuery,NYTD.Video.Libs.JQUERY_IS_LOADED=!0,e(!0))},NYTD.Video.DEPENDENCY_LOAD_CHECK_INTERVAL),NYTD.Video.DOCUMENT_HEAD&&NYTD.Video.DOCUMENT_HEAD.appendChild(n)}}},loadDependencies:function(e,t,n){NYTD.Video.Validation.isEmpty(e)&&t.call(n,!1);var r=this;NYTD.Video.$?this.buildDependencyCache(function(){r.doLoadDependencies(e,t,n)},this):this.loadJQuery(function(){r.buildDependencyCache(function(){r.doLoadDependencies(e,t,n)},r)})},buildDependencyCache:function(e,t){var n=this,r=NYTD.Video.$('script[type="text/javascript"]'),i=parseInt(r.length,10)-1;r.each(function(r,s){var o=NYTD.Video.$(this).attr("src");NYTD.Video.Validation.isEmpty(o)||(n.scriptCache[o.toLowerCase()]=!0),parseInt(r,10)===i&&e.call(t)})},doLoadDependencies:function(e,t,n){var r=e.length,i=0,s=this,o=function(u,a){var f=function(){i<r?o(e[i].src,e[i].type):t.call(n,!0)};u&&!s.scriptCache[u.toLowerCase()]||a&&!window[a]?(s.scriptCache[u]=!0,s.getScript(u,function(e){i++,f()},NYTD.Video.CACHE_SCRIPT_LOAD)):(i++,f())};o(e[0].src,e[0].type)},loadBundle:function(e,t){var n=this;if(e&&e.length>0){var r=[];for(var i=0;i<e.length;i++){var s=e[i];if(s.type&&!NYTD.Video.Validation.isEmpty(window[s.type]))continue;r.push(s.src)}r&&r.length?this.loadJQuery(function(){r=r.join(";"),n.getScript([NYTD.Video.Libs.LOADER,r].join(""),function(){typeof t=="function"&&t(!0)})}):typeof t=="function"&&t(!1)}else typeof t=="function"&&t(!1)},loadScript:function(e){var t=document.getElementsByTagName("script"),n=t.length,r=!1;for(var i=0;i<n;i++)if(t[i].src===e){r=!0;break}if(!r){var s=document.createElement("script");s.src=e,s.type="text/javascript";var o=document.getElementsByTagName("head");return typeof o!="undefined"&&o.length>0?(o[0].appendChild(s),!0):!1}return!1},stopRefreshTimer:function(e){!NYTD.Video.Validation.isEmpty(NYTD.HomepageRefresh)&&NYTD.Video.Validation.isFunction(NYTD.HomepageRefresh.stop)&&NYTD.HomepageRefresh.stop(e)},startRefreshTimer:function(e){!NYTD.Video.Validation.isEmpty(NYTD.HomepageRefresh)&&NYTD.Video.Validation.isFunction(NYTD.HomepageRefresh.start)&&NYTD.HomepageRefresh.start(e)},registerRefreshTimerElement:function(e){return!NYTD.Video.Validation.isEmpty(NYTD.HomepageRefresh)&&NYTD.Video.Validation.isFunction(NYTD.HomepageRefresh.register)?NYTD.HomepageRefresh.register(e):-1},forceBoolean:function(e){return typeof e=="undefined"||null===e||e!=="true"&&e!==!0?!1:!0},bind:function(e,t){if(typeof e!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice.call(arguments,1);n.shift(),n.shift();var r=e,i=function(){},s=function(){var s=e instanceof i?e:t||window;return r.apply(s,n.concat(Array.prototype.slice.call(arguments)))};return i.prototype=e.prototype,s.prototype=new i,s}}}function h(){var e=document.getElementsByTagName("head");this.Validation.isEmpty(e[0])?this.DOCUMENT_HEAD=null:this.DOCUMENT_HEAD=e[0]}var e="http://js.nyt.com",t=!0,n="production",r="http://static.local.nytimes.com",i="http://video-int01.qprvt.nytimes.com/video",s="http://static.stg.nytimes.com",o=e;window&&window.location&&window.location.host&&(window.location.host.indexOf("localhost")!==-1?(n="local",e=r,t=!1):window.location.host.indexOf("-int01.")!==-1?(n="development",e=i,t=!1):window.location.host.indexOf(".dev")!==-1?(n="development",e=i,t=!1):window.location.host.indexOf("app1.prvt")!==-1?(n="staging",e=s,t=!1):window.location.host.indexOf(".stg")!==-1&&(n="staging",e=s,t=!1)),u.call(NYTD),a.call(NYTD.Video),f.call(NYTD.Video),l.call(NYTD.Video),c.call(NYTD.Video),h.call(NYTD.Video)})(),NYTD.Video.Log=window.NYTD.Video.Log||{},NYTD.Video.Log.Levels=window.NYTD.Video.Log.Levels||{debug:1,info:2,warn:3,error:4},function(){return this.RemoteLogger=function(){var e="",t="",n=window.console||null,r=function(e){var r=[].concat([t],Array.prototype.slice.call(arguments));n.debug(r)},i=function(e){var r=[].concat([t],Array.prototype.slice.call(arguments));n.info(r)},s=function(e){var r=[].concat([t],Array.prototype.slice.call(arguments));n.warn(r)},o=function(e){var r=[].concat([t],Array.prototype.slice.call(arguments));n.error(r)};return{initialize:function(e){if(NYTD.Video.Validation.isEmpty(e)||NYTD.Video.Validation.isEmpty(e.scope))throw new Error("Missing one or more required arguments.");NYTD.Video.Validation.isEmpty(n)&&(n={}),NYTD.Video.Validation.isFunction(n.log)||(n.log=function(){}),NYTD.Video.Validation.isFunction(n.debug)||(n.debug=function(){}),NYTD.Video.Validation.isFunction(n.info)||(n.info=function(){}),NYTD.Video.Validation.isFunction(n.warn)||(n.warn=function(){}),NYTD.Video.Validation.isFunction(n.error)||(n.error=function(){}),t=e.scope},debug:function(){NYTD.Video.Log.Level<=NYTD.Video.Log.Levels.DEBUG&&i.apply(null,arguments)},info:function(){NYTD.Video.Log.Level<=NYTD.Video.Log.Levels.INFO&&i.apply(null,arguments)},warn:function(){NYTD.Video.Log.Level<=NYTD.Video.Log.Levels.WARN&&s.apply(null,arguments)},error:function(){NYTD.Video.Log.Level<=NYTD.Video.Log.Levels.ERROR&&o.apply(null,arguments)}}},this.Logger={get:function(e){var t=new NYTD.Video.RemoteLogger;return t.initialize({scope:e}),t}},this}.call(NYTD.Video),function(){this.VideoManager=function(){var e={},t=[],n=!1,r=!1,i="",s=null,o=null;e.create=function(){var e=null;NYTD.Video.Validation.hasFlash()?o=NYTD.Video.Player.FlashVideoPlayer:o=NYTD.Video.Player.HTML5VideoPlayer,e=new o;var n=NYTD.Video.VideoEvents,r=e.getSubscription();return r.subscribe(n.DESTROYING,u),r.subscribe(n.STOP_OTHER_PLAYERS,m),r.subscribe(n.DISABLE_OTHER_PLAYERS,g),r.subscribe(n.ENABLE_OTHER_PLAYERS,y),r.subscribe(n.MEDIA_BEGIN,S),r.subscribe(n.CONTENT_LOAD,w),r.subscribe(n.VIDEO_START,l),r.subscribe(n.TEMPLATE_LOADED,T),t.push(e),e},e.getPlayers=function(){return t},e.setAllowMultiPlayback=function(e){c(e)},e.getAllowMultiPlayback=function(){return h()};var u=function(e){var n=e.id,r=NYTD.Video.VideoEvents,i=0,s=t.length;for(i;i<s;i++){var o=t[i];if(o.getObjectId()==n){var a=e.player.getSubscription();a.cancel(r.DESTROYING,u),a.cancel(r.STOP_OTHER_PLAYERS,m),a.cancel(r.DISABLE_OTHER_PLAYERS,g),a.cancel(r.ENABLE_OTHER_PLAYERS,y),a.cancel(r.MEDIA_BEGIN,S),a.cancel(r.CONTENT_LOAD,w),a.cancel(r.VIDEO_START,l),a.cancel(r.TEMPLATE_LOADED,T),t.splice(i,1),o=null;break}}},a=function(e){},f=function(e){},l=function(e){if(i==e.id)return;i=e.id,p(e.id)},c=function(e){e=e&&e===!0||e==="true",n=e},h=function(){return n},p=function(e){if(h())return;var n=0,r=t.length;for(n;n<r;n++){var i=t[n];if(i.getObjectId()!==e&&i.getVideoModule().isPlaying()){i.stop();break}}},d=function(e){var n=0,r=t.length;for(n;n<r;n++){var i=t[n];i.getObjectId()!==e&&i.disable()}},v=function(e){var n=0,r=t.length;for(n;n<r;n++){var i=t[n];i.getObjectId()!==e&&i.enable()}},m=function(e){p(e.id)},g=function(e){r=!0,d(e.id)},y=function(e){r=!1,v(e.id)},b=function(e){},w=function(e){i=e.id},E=function(e){if(h())return;var n=0,r=t.length;for(n;n<r;n++){var i=t[n];if(i.getObjectId()!==e){i.stop();break}}},S=function(e){E(e.id)},x=function(e){},T=function(e){var n=0,i=t.length;for(n;n<i;n++){var s=t[n];if(s.getObjectId()===e.player.getObjectId()){var o=s.getAdModule();o.addEventListener(BCAdvertisingEvent.AD_START,a),o.addEventListener(BCAdvertisingEvent.AD_COMPLETE,f);if(r){var u=s.getVideoModule();setTimeout(function(){u.setEnabled(!1)},1e3)}break}}};return e.getActivePlayer=function(){var e=null,n=t.length;for(var r=0;r<n;r++){e=t[r];if(e.getObjectId()===i)break}return e},e}}.call(NYTD.Video),function(){this.VideoPoster=function(){return{props:null,player:null,documentHead:null,playButtonWidth:60,playButtonHeight:50,playButtonVisible:!1,buttonAnimated:!1,initialized:!1,isExpanded:!1,isAnimating:!1,isVisible:!1,isRendered:!1,isPollCheckPending:!1,isLoadingPlayer:!1,mousedIn:!1,bumperImage:null,spinnerImg:null,hotspot:null,overlay:null,playButton:null,playButtonTextContainer:null,playButtonContainer:null,backgroundImage:null,photoCreditContainer:null,destroying:!1,smallestWidth:30,smallestHeight:30,expandOptions:null,contractOptions:null,posterStylesheet:NYTD.Video.BaseURL+"/css/0.1/screen/common/modules/video/poster.css",init:function(e,t){this.logger=NYTD.Video.Logger.get("NYTD.Video.VideoPoster");if(t.autoStart)return;this.setPlayer(e),this.setProps(t);if(!this.validate(this.props))return;t.loadVideoPosterAssets&&this.loadPosterStylesheet(),this.buildPlayer(),this.player.getSubscription().subscribe(NYTD.Video.VideoEvents.CONTENT_LOAD,NYTD.Video.Utils.bind(this.onContentLoaded,this)),this.player.getSubscription().subscribe(NYTD.Video.VideoEvents.DESTROYING,NYTD.Video.Utils.bind(this.onDestroyed,this)),this.doInit()},resize:function(e,t){if((this.props.width!==e||this.props.height!==t)&&!this.props.autoStart){this.props.width=e||this.props.width,this.props.height=t||this.props.height,this.props.playButtonTop=null,this.props.playButtonLeft=null,this.props.spinnerImgTop=null,this.props.spinnerImgLeft=null;if(!this.validate(this.props))return;this.resetContainer(),this.resizeOverlay(),this.resizeBackgroundImage(),this.resizeHotspot(),this.resizePlayButton()}},loadPosterStylesheet:function(){var e=NYTD.Video.$(document.createElement("link"));e.attr("rel","stylesheet").attr("href",this.posterStylesheet),NYTD.Video.Validation.isEmpty(NYTD.Video.DOCUMENT_HEAD)||NYTD.Video.$(NYTD.Video.DOCUMENT_HEAD).append(e)},hidePlayer:function(){if(NYTD.Video.Validation.isIOS()||NYTD.Video.Validation.isTouchable())this.logger.info("hidePlayer"),this.player.hide()},hidePhotoCredit:function(){NYTD.Video.Validation.isEmpty(this.photoCreditContainer)||(this.logger.info("hidePhotoCredit"),this.photoCreditContainer.hide())},hideOverlay:function(){NYTD.Video.Validation.isEmpty(this.overlay)||(this.logger.info("hideOverlay"),this.overlay.hide())},hideHotspot:function(){NYTD.Video.Validation.isEmpty(this.hotspot)||(this.logger.info("hideHotspot"),this.hotspot.hide())},hideSpinnerImage:function(){NYTD.Video.Validation.isEmpty(this.spinnerImage)||this.spinnerImage.hide()},showPlayer:function(){if(NYTD.Video.Validation.isIOS()||NYTD.Video.Validation.isTouchable())this.logger.info("showPlayer"),this.player.show()},showPhotoCredit:function(){NYTD.Video.Validation.isEmpty(this.photoCreditContainer)||this.photoCreditContainer.show()},showOverlay:function(){NYTD.Video.Validation.isEmpty(this.overlay)||this.overlay.show()},showHotspot:function(){NYTD.Video.Validation.isEmpty(this.hotspot)||this.hotspot.show(),this.playButtonContainer.show()},showPlayButtonContainer:function(){NYTD.Video.Validation.isEmpty(this.playButtonContainer)||this.playButtonContainer.show()},reinitialize:function(){if(this.destroying)return;try{this.logger.info("reinitialize"),this.showPlayButtonContainer(),this.showHotspot(),this.showOverlay(),this.showPhotoCredit(),this.player.videoModule.mediaIsLive()?this.showLiveBumper():this.showVODBumper(),this.hidePlayer(),this.activate(),this.isVisible=!0,this.isLoadingPlayer=!1}catch(e){this.logger.error(e)}},doInit:function(){!this.initialized&&!this.isPollCheckPending&&(this.logger.info("doInit"),this.hidePlayer(),this.activate(),this.showBumper(),this.playButtonContainer.show(),this.initialized=!0)},onContentLoaded:function(e){this.logger.info("VideoPoster::onContentLoaded",e),this.doInit()},buildPlayer:function(){this.props.autoStart||(this.setContainer(),this.drawOverlay(),this.drawBackgroundImage(),this.drawPhotoCredit(),this.drawBumper(),this.drawHotspot(),this.drawSpinnerImage(),this.showOverlay(),this.drawPlayButton(),this.container.append(this.hotspot))},setContainer:function(){this.container=NYTD.Video.$(this.props.container),this.container.attr("style","position:relative;display:block;height: "+this.props.height+"px; width: "+this.props.width+"px;background:#272727"),this.container.css({position:"relative",display:"block",height:this.props.height.toString()+"px",width:this.props.width.toString()+"px",overflow:"hidden","line-height":"0"})},resetContainer:function(){this.container.attr("style","position:relative;display:block;height: "+this.props.height+"px; width: "+this.props.width+"px;background:#272727"),this.container.css({position:"relative",display:"block",height:this.props.height.toString()+"px",width:this.props.width.toString()+"px",overflow:"hidden","line-height":"0"})},play:function(){this.player.getVideoModule().play()},setProps:function(e){this.props=e},validate:function(){return this.props.overlay.backgroundImage?(this.props.overlay.backgroundImageContainerID=this.props.overlay.backgroundImageContainerID||this.props.id+"-posterImageContainer",this.props.overlay.backgroundImagePlayButtonContainerID=this.props.overlay.backgroundImagePlayButtonContainerID||this.props.id+"-playButtonContainer",this.props.hotspotContainerID=this.props.hotspotContainerID||this.props.id+"-hotspotContainer",this.props.playButtonWidth=this.props.playButtonWidth||this.playButtonWidth,this.props.playButtonHeight=this.props.playButtonHeight||this.playButtonHeight,this.props.playButtonTop=this.props.playButtonTop||(parseInt(this.props.height,10)/2-23).toString(),this.props.playButtonLeft=this.props.playButtonLeft||(parseInt(this.props.width,10)/2-25).toString(),this.props.spinnerImgTop=this.props.spinnerImgTop||(parseInt(this.props.height,10)/2-17).toString(),this.props.spinnerImgLeft=this.props.spinnerImgLeft||(parseInt(this.props.width,10)/2-17).toString(),this.props.overlay.playButtonClass=this.props.playButtonClass||"standardSize",this.props.overlay.buttonPosition=this.props.overlay.buttonPosition||"center",this.positionButton(),!0):!1},setPlayer:function(e){this.player=e},styleOverlay:function(){this.overlay.css({cursor:"pointer",width:this.props.width.toString()+"px",height:this.props.height.toString()+"px"}).css({cursor:"hand"}).addClass("videoOverlayDiv").attr("id",this.props.id+"_"+this.props.overlay.backgroundImageContainerID).attr("style","height: "+this.props.height+"px; width: "+this.props.width+"px;")},resizeOverlay:function(){this.overlay.css({cursor:"pointer",width:this.props.width.toString()+"px",height:this.props.height.toString()+"px"}).attr("style","height: "+this.props.height+"px; width: "+this.props.width+"px;")},styleHotspot:function(){this.hotspot.addClass("videoHotspotDiv").attr("id",this.props.id+"_videoHotspotDiv").attr("style","height: "+this.props.height.toString()+"px; width: "+this.props.width.toString()+"px;").css({cursor:"pointer",top:"0px",left:"0px",width:this.props.width.toString()+"px",height:this.props.height.toString()+"px"}).css({cursor:"hand"})},resizeHotspot:function(){this.hotspot.attr("style","height: "+this.props.height.toString()+"px; width: "+this.props.width.toString()+"px;").css({cursor:"pointer",top:"0px",left:"0px",width:this.props.width.toString()+"px",height:this.props.height.toString()+"px"})},styleSpinnerImage:function(){this.spinnerImg.css({top:this.props.spinnerImgTop+"px",left:this.props.spinnerImgLeft+"px",position:"relative"})},drawOverlay:function(){this.overlay=NYTD.Video.$(document.createElement("div")),this.styleOverlay(),this.container.append(this.overlay)},drawBackgroundImage:function(){this.backgroundImage=NYTD.Video.$(document.createElement("img")),this.backgroundImage.attr("src",this.props.overlay.backgroundImage).attr("width",this.props.width).attr("height",this.props.height),this.overlay.append(this.backgroundImage)},resizeBackgroundImage:function(){this.backgroundImage.attr("width",this.props.width).attr("height",this.props.height)},showLiveBumper:function(){this.logger.info("showLiveBumper"),this.bumperImage&&(this.bumperImage.css({top:this.props.height-this.props.overlay.liveBumperHeight+"px",display:"block"}),this.bumperImage.attr("src",this.props.overlay.liveBumperPath))},showVODBumper:function(){this.logger.info("showVODBumper"),this.bumperImage&&(this.bumperImage.css({top:this.props.height-this.props.overlay.vodBumperHeight+"px",display:"block"}),this.bumperImage.attr("src",this.props.overlay.vodBumperPath))},showBumper:function(){if(this.props.overlay.liveBumperPath||this.props.overlay.vodBumperPath)this.player.videoModule&&this.player.videoModule.mediaIsLive()?(this.logger.info("showBumper - live"),this.showLiveBumper()):(this.logger.info("showBumper - vod"),this.showVODBumper())},showSpinnerImage:function(){NYTD.Video.Validation.isEmpty(this.spinnerImg)||this.spinnerImg.show()},drawBumper:function(){if(this.props.overlay.vodBumperPath||this.props.overlay.liveBumperPath)this.bumperImage=NYTD.Video.$(document.createElement("img")),this.bumperImage.css({position:"absolute",display:"none"}),this.overlay.append(this.bumperImage),this.props.overlay.bumperDefault==="live"?this.showLiveBumper():this.props.overlay.bumperDefault==="vod"&&this.showVODBumper()},drawPhotoCredit:function(){!NYTD.Video.Validation.isEmpty(this.props.overlay.photoCredit)&&!NYTD.Video.Validation.isEmpty(this.props.overlay.photoCreditContainer)&&(NYTD.Video.Validation.isString(this.props.overlay.photoCreditContainer)&&(this.props.overlay.photoCreditContainer=this.props.overlay.photoCreditContainer.replace("#",""),this.photoCreditContainer=NYTD.Video.$("#"+this.props.overlay.photoCreditContainer)),NYTD.Video.Validation.isEmpty(this.photoCreditContainer)||this.photoCreditContainer.html(this.props.overlay.photoCredit))},removePhotoCredit:function(){NYTD.Video.Validation.isEmpty(this.photoCreditContainer)||this.photoCreditContainer.hide()},drawPlayButton:function(){this.playButtonContainer=NYTD.Video.$(document.createElement("div")),this.playButtonContainer.addClass("videoPlayButtonDiv videoPlayButtonContracted "+this.props.overlay.playButtonClass+" "+this.props.overlay.buttonPosition),this.playButtonContainer.attr("id",this.props.id+"_"+this.props.overlay.backgroundImagePlayButtonContainerID),this.playButtonContainer.css({top:this.props.playButtonTop+"px",left:this.props.playButtonLeft+"px",opacity:.6,display:"none"}),this.props.overlay.buttonWidth&&this.playButtonContainer.width(this.props.overlay.buttonWidth),this.props.overlay.buttonHeight&&this.playButtonContainer.height(this.props.overlay.buttonHeight),this.playButton=NYTD.Video.$(document.createElement("img")),this.playButton.attr("src",this.props.overlay.buttonPlayIcon),this.props.overlay.playIconWidth&&this.playButton.width(this.props.overlay.playIconWidth),this.props.overlay.playIconHeight&&this.playButton.height(this.props.overlay.playIconHeight),this.playButton.attr("style","left: "+String(this.props.overlay.buttonWidth/2-this.props.overlay.playIconWidth/2)+"px; top: "+String(this.props.overlay.buttonHeight/2-this.props.overlay.playIconHeight/2)+"px; position: absolute; width: "+this.props.overlay.playIconWidth+"px; height:"+this.props.overlay.playIconHeight+"px"),this.playButtonContainer.append(this.playButton),this.playButtonTextContainer=NYTD.Video.$(document.createElement("p")),this.playButtonText=document.createTextNode("Play video"),this.playButtonTextContainer.append(this.playButtonText),this.playButtonContainer.append(this.playButtonTextContainer),this.container.append(this.playButtonContainer),this.playButtonVisible=!0},resizePlayButton:function(){this.playButtonContainer.attr("class",""),this.playButtonContainer.addClass("videoPlayButtonDiv videoPlayButtonContracted "+this.props.overlay.playButtonClass+" "+this.props.overlay.buttonPosition),this.playButtonContainer.css({top:this.props.playButtonTop+"px",left:this.props.playButtonLeft+"px",opacity:.6}),this.props.overlay.buttonWidth&&this.playButtonContainer.width(this.props.overlay.buttonWidth),this.props.overlay.buttonHeight&&this.playButtonContainer.height(this.props.overlay.buttonHeight),this.props.overlay.playIconWidth&&this.playButton.width(this.props.overlay.playIconWidth),this.props.overlay.playIconHeight&&this.playButton.height(this.props.overlay.playIconHeight),this.playButton.attr("style","left: "+String(this.props.overlay.buttonWidth/2-this.props.overlay.playIconWidth/2)+"px; top: "+String(this.props.overlay.buttonHeight/2-this.props.overlay.playIconHeight/2)+"px; position: absolute; width: "+this.props.overlay.playIconWidth+"px; height:"+this.props.overlay.playIconHeight+"px")},drawHotspot:function(){this.hotspot=NYTD.Video.$(document.createElement("div")),this.styleHotspot(),this.overlay.insertBefore(this.hotspot,this.backgroundImage)},drawSpinnerImage:function(){this.logger.info("drawSpinnerImage"),this.spinnerImg=NYTD.Video.$(document.createElement("img")),this.spinnerImg.attr("src",this.props.overlay.spinnerIcon),this.styleSpinnerImage(),this.container.append(this.spinnerImg)},removeSpinnerImage:function(){this.logger.info("removeSpinnerImage"),this.spinnerImg.remove()},expand:function(){var e=this;if(!this.isExpanded&&!this.isAnimating){this.isAnimating=!0;if(!this.expandOptions){this.expandOptions={};switch(this.props.overlay.buttonPosition){case"bottomLeft":case"topLeft":this.expandOptions.width="+="+this.props.overlay.buttonExpandBy;break;case"bottomRight":case"topRight":this.expandOptions.width="+="+this.props.overlay.buttonExpandBy,this.expandOptions.left="-="+this.props.overlay.buttonExpandBy;break;case"center":this.expandOptions.width="+="+this.props.overlay.buttonExpandBy,this.expandOptions.left="-="+this.props.overlay.buttonExpandBy/2}this.expandOptions.opacity=1}this.playButtonContainer.animate(this.expandOptions,this.props.overlay.buttonExpandDuration,this.props.overlay.buttonExpandEasing,function(){NYTD.Video.$(this).removeClass("videoPlayButtonContracted"),e.playButtonTextContainer.show(),e.isAnimating=!1,e.isExpanded=!0,e.mousedIn===!1&&e.contract()})}},contract:function(){var e=this;if(this.isExpanded&&!this.isAnimating){this.isAnimating=!0;if(!this.contractOptions){this.contractOptions={};switch(this.props.overlay.buttonPosition){case"bottomLeft":case"topLeft":this.contractOptions.width="-="+this.props.overlay.buttonExpandBy;break;case"bottomRight":case"topRight":this.contractOptions.width="-="+this.props.overlay.buttonExpandBy,this.contractOptions.left="+="+this.props.overlay.buttonExpandBy;break;case"center":this.contractOptions.width="-="+this.props.overlay.buttonExpandBy,this.contractOptions.left="+="+this.props.overlay.buttonExpandBy/2}this.contractOptions.opacity=.7}this.playButtonTextContainer.hide(),this.playButtonContainer.animate(this.contractOptions,this.props.overlay.buttonExpandDuration,this.props.overlay.buttonExpandEasing,function(){NYTD.Video.$(this).removeClass("videoPlayButtonContracted"),e.isAnimating=!1,e.isExpanded=!1,e.mousedIn===!0&&e.expand()})}},onClick:function(e){this.logger.info("clicked - unbound click event from hotspot"),this.hotspot.unbind("click touchstart",NYTD.Video.Utils.bind(this.onClick,this)),this.revealAndPlay()},disable:function(){this.logger.info("disable - disbling click on hotspot...");if(!this.isVisible)return;var e=this,t=function(){e.hotspot.unbind("click touchstart",NYTD.Video.Utils.bind(e.onClick,e))};this.overlay.animate({opacity:.3},{duration:100,easing:"linear",onComplete:t})},enable:function(){if(!this.isVisible)return;var e=this,t=function(){e.hotspot.unbind("click touchstart",NYTD.Video.Utils.bind(e.onClick,e)).bind("click touchstart",NYTD.Video.Utils.bind(e.onClick,e))};this.overlay.animate({opacity:0},{duration:100,easing:"linear",onComplete:t})},registerMouseEvents:function(){var e=this,t=null,n=null;this.props.overlay.buttonAnimated?(this.hotspot.removeClass("videoHotspotDiv active").addClass("videoHotspotDiv active"),t=function(){e.mousedIn=!0,function(){e.expand()}(),function(){e.playButtonContainer.animate({opacity:1},{duration:300,easing:"linear"})}()},n=function(){e.mousedIn=!1,e.playButtonContainer.animate({opacity:.6},{duration:200,easing:"linear"}),e.contract()},this.hotspot.unbind("mouseenter",t).unbind("mouseleave",n).bind("mouseleave",n).bind("mouseenter",t)):(t=function(){e.playButtonContainer.animate({opacity:1},{duration:300,easing:"linear"})},n=function(){e.playButtonContainer.animate({opacity:.6},{duration:200,easing:"linear"})},this.hotspot.unbind("mouseenter",t).unbind("mouseleave",n).bind("mouseenter",t).bind("mouseleave",n))},activate:function(){this.logger.info("activate hotspot");var e=NYTD.Video.$(document),t=null,n=null,r=this;this.hotspot.css({opacity:0}),this.removeSpinnerImage(),this.logger.info("binding click"),this.hotspot.unbind("click touchstart",NYTD.Video.Utils.bind(this.onClick,this)).bind("click touchstart",NYTD.Video.Utils.bind(this.onClick,this)),this.isVisible=!0,NYTD.Video.Validation.isTouchable()||this.registerMouseEvents()},reload:function(){NYTD.Video.Validation.isIOS()&&this.logger.info("reload - reloading object")},onTemplateLoaded:function(){this.logger.info("onTemplateLoaded"),this.removeSpinnerImage(),this.isRendered=!0},onDestroyed:function(){this.destroying=!0,this.unregisterPlayerEvents(),this.hotspot.remove(),this.playButtonContainer.remove(),this.overlay.remove()},unregisterPlayerEvents:function(){this.player.getSubscription().cancel(NYTD.Video.VideoEvents.VIDEO_COMPLETE,NYTD.Video.Utils.bind(this.reinitialize,this)),this.player.getSubscription().cancel(NYTD.Video.VideoEvents.TEMPLATE_LOADED,NYTD.Video.Utils.bind(this.onTemplateLoaded,this))},registerContentEvents:function(){var e=this,t=function(){e.player.getSubscription().cancel(NYTD.Video.VideoEvents.TEMPLATE_LOADED,NYTD.Video.Utils.bind(e.onTemplateLoaded,e)),e.logger.info("content loaded...."+e.isVisible),e.reload(),e.isVisible||e.player.play()};this.unregisterPlayerEvents(),this.player.getSubscription().cancel(NYTD.Video.VideoEvents.CONTENT_LOAD,t),this.player.getSubscription().subscribe(NYTD.Video.VideoEvents.CONTENT_LOAD,t),this.player.getSubscription().subscribe(NYTD.Video.VideoEvents.VIDEO_COMPLETE,NYTD.Video.Utils.bind(this.reinitialize,this)),this.player.getSubscription().subscribe(NYTD.Video.VideoEvents.TEMPLATE_LOADED,NYTD.Video.Utils.bind(this.onTemplateLoaded,this)),this.player.render()},revealAndPlay:function(){var e=this;if(this.isLoadingPlayer)return;this.isLoadingPlayer=!0,this.overlay.fadeTo(0,200,function(){e.showPlayer(),e.props.autoRender&&e.reload();var t=this;setTimeout(function(){e.removePhotoCredit(),e.playButtonContainer.hide(),e.hotspot.hide(),e.overlay.hide(),e.isVisible=!1,NYTD.Video.Validation.isEmpty(e.spinnerImg)?e.drawSpinnerImage():e.showSpinnerImage();if(e.props.autoRender)e.player.defaultProps.autoStart=!0,e.player.play();else if(e.isRendered)e.logger.info("is rendered..."),e.player.play();else{e.logger.info("testing if we can poll");if(e.player.canPoll()){e.logger.info("can poll...");var t=function(){e.logger.info("VideoPoster::onPollCheckComplete"),e.player.getSubscription().cancel(NYTD.Video.VideoEvents.POLL_CHECK_COMPLETE,t),e.registerContentEvents()};e.player.getSubscription().cancel(NYTD.Video.VideoEvents.POLL_CHECK_COMPLETE,t),e.player.getSubscription().subscribe(NYTD.Video.VideoEvents.POLL_CHECK_COMPLETE,t),e.player.checkState()}else e.registerContentEvents()}},1)})},positionButton:function(){var e=57,t=52;this.props.overlay.buttonWidth!==null&&this.props.overlay.buttonHeight!==null?this.props.overlay.buttonWidth>=this.smallestWidth&&this.props.overlay.buttonHeight>=this.smallestHeight&&(e=this.props.overlay.buttonWidth,t=this.props.overlay.buttonHeight):this.props.width<=190?(this.props.overlay.playButtonClass="smallSize",e=34,t=31):this.props.width>190&&this.props.width<347&&(this.props.overlay.playButtonClass="mediumSize",e=46,t=42);switch(this.props.overlay.buttonPosition){case"bottomLeft":this.props.playButtonLeft=this.props.overlay.buttonPaddingLeftRight,this.props.playButtonTop=this.props.height-t-this.props.overlay.buttonPaddingTopBottom;break;case"bottomRight":this.props.playButtonLeft=this.props.width-e-this.props.overlay.buttonPaddingLeftRight,this.props.playButtonTop=this.props.height-t-this.props.overlay.buttonPaddingTopBottom;break;case"topRight":this.props.playButtonLeft=this.props.width-e-this.props.overlay.buttonPaddingLeftRight,this.props.playButtonTop=this.props.overlay.buttonPaddingTopBottom;break;case"topLeft":this.props.playButtonLeft=this.props.overlay.buttonPaddingLeftRight,this.props.playButtonTop=this.props.overlay.buttonPaddingTopBottom;break;case"center":this.props.playButtonLeft=this.props.width/2-e/2,this.props.playButtonHeight=this.props.height/2-t/2}this.props.overlay.buttonWidth=e,this.props.overlay.buttonHeight=t,this.props.overlay.playIconWidth=e,this.props.overlay.playIconHeight=t}}}}.call(NYTD.Video),NYTD.Video&&typeof NYTD.Video.Factory!="object"&&(NYTD.Video.Factory=NYTD.Video.Factory||{},function(){this.videoManager=new NYTD.Video.VideoManager,this.instances={},this.PREFIX="nytd_video_",this.CONFIGURATION_ERROR="Opps! There seems to be a configuration error when you called NYTD.Video.Factory.create({...}). Please see the error notice.\r\n",this.BC_ASSETS_LOADED=!1,this.BC_ASSETS_LOADED_QUEUE=[],this.BC_ASSETS_LOADED_IN_PROGRESS=!1;var e=null,t=function(e){var t=this.BC_ASSETS_LOADED_QUEUE.length;for(var n=0;n<t;n++){var r=this.BC_ASSETS_LOADED_QUEUE.shift();NYTD.Video.Validation.isFunction(r)&&r(e)}},n=function(e,t){t.setADXInfo({playerType:e.playerType,pagename:e.adxPagename||"",positions:e.adxAdPositions||"VideoPlayerAd,VideoBigAd,ADX_CLIENTSIDE",bigAdContainer:e.bigAdContainer,bannerWidth:e.bannerWidth,bannerHeight:e.bannerHeight,adFrequency:e.adFrequency,adCountdown:e.adCountdown})},r=function(e,t){var n=new NYTD.Video.Metrics.WebTrends;n.init(t),n.setInfo({playerType:e.playerType,kicker:e.kicker||"",autoPlay:e.autoStart||!1,series:e.series||"",wttags:e.wttags||"",videoEvent:e.videoEvent||"play",isPromo:e.isPromo||!1});var r=new NYTD.Video.Metrics.ComScore;r.init(t),r.setInfo({playerType:e.playerType,kicker:e.kicker||"",autoPlay:e.autoStart||!1,series:e.series||"",wttags:e.wttags||"",isPromo:e.isPromo||!1})},i=function(e){var t=[{name:"@videoPlayer",value:"ref:"+e.videoId},{name:"playerID",value:e.playerId},{name:"width",value:e.width},{name:"height",value:e.height},{name:"bgcolor",value:e.bgcolor},{name:"publisherID",value:e.publisherId},{name:"isVid",value:e.isVid},{name:"isUI",value:e.isUI},{name:"wmode",value:e.wmode},{name:"dynamicStreaming",value:e.dynamicStreaming},{name:"optimizedContentLoad",value:e.optimizedContentLoad},{name:"AllowScriptAccess",value:e.allowScriptAccess},{name:"useExternalAdControls",value:e.useExternalAdControls},{name:"autoStart",value:e.autoStart},{name:"includeAPI",value:!1},{name:"templateErrorHandler",value:e.templateErrorHandler},{name:"quality",value:e.quality},{name:"@videoList",value:e.videoList}],n=[];n.push(e.videoId);var r=e.videoIds.length;for(var i=0;i<r;i++)n.push(e.videoIds[i]);return e.videoIds=n,e.stillOverlay&&t.push({name:"stillOverlay",value:e.stillOverlay}),t},s=function(e){return e.width=e.width||600,e.height=e.height||338,e.videoList=e.videoList||"",e.objectClass=e.objectClass||"BrightcoveExperience",e.bgcolor=e.bgcolor||"#000000",e.publisherId=e.publisherId||"1749339200",e.readToken=typeof e.publisherReadToken!="undefined"&&null!==e.publisherReadToken?e.publisherReadToken:"cE97ArV7TzqBzkmeRVVhJ8O6GWME2iG_bRvjBTlNb4o.",e.isVid=e.isVid||"true",e.isUI=e.isUI||"true",e.wmode=e.wmode||"transparent",e.dynamicStreaming=e.dynamicStreaming||"true",e.connectOnLoad=e.connectOnLoad||"false",e.enableInitialBandwidthDetection=e.enableInitialBandwidthDetection||"true",e.optimizedContentLoad=e.optimizedContentLoad||"true",e.allowScriptAccess=e.allowScriptAccess||"always",e.useExternalAdControls=e.useExternalAdControls||"true",e.autoStart=e.autoStart&&e.autoStart==="true"||e.autoStart===!0?!0:!1,e.matchContainerSize=e.matchContainerSize||!1,e.autoRender=typeof e.autoRender!="undefined"&&e.autoRender!==null&&e.autoRender===!1||e.autoRender==="false"?!1:!0,e.shareURL=e.shareURL||e.shareUrl||"",e.templateErrorHandler=e.templateErrorHandler||u,e.quality=e.quality||"high",e.events=e.events||{},e.isLive=e.isLive&&e.isLive==="true"||e.isLive===!0?!0:!1,e.m3u=e.m3u||"",e.series=e.series||"",e.wttags=e.wttags||"",e.minRegularPlayerWidth=e.minRegularPlayerWidth||312,e.isPromo=e.isPromo||!1,e.width<e.minRegularPlayerWidth||e.isPromo===!0?(e.videoEvent="promo",e.kicker="promo",e.adxPagename="video.nytimes.com/noads",e.isPromo=!0):e.videoEvent=e.videoEvent||"play",e.captureProgressEvents=e.captureProgressEvents&&e.captureProgressEvents===!0||e.captureProgressEvents==="true",e.enableHTML5Ads=e.enableHTML5Ads===!1||e.enableHTML5Ads==="false"?!1:!0,e.useNativeControls=e.useNativeControls||!1,e.enableLivePoll=e.enableLivePoll===!0||e.enableLivePoll==="true",e.pollService=e.pollService||null,e.captionContainer=e.captionContainer||null,e.liveCaption=e.liveCaption||"Live Video",e.vodCaption=e.vodCaption||"Video",e.spinnerImgTop=e.spinnerImgTop||null,e.spinnerImgLeft=e.spinnerImgLeft||null,e.videoIds=e.videoIds||[],e.autoPlayPlaylist=e.autoPlayPlaylist||!1,e.autoPosterFrame=!e.autoPosterFrame||e.autoPosterFrame!=="true"&&e.autoPosterFrame!==!0?!1:!0,e.overlay=e.overlay||{},e.overlay.backgroundImage=e.overlay.backgroundImage||"",e.overlay.backgroundImageCSSPath=e.overlay.cssPath||null,e.overlay.photoCredit=e.overlay.photoCredit||null,e.overlay.photoCreditContainer=e.overlay.photoCreditContainer||null,e.overlay.buttonWidth=parseInt(e.overlay.buttonWidth,10),e.overlay.buttonWidth=e.overlay.buttonWidth>0?e.overlay.buttonWidth:null,e.overlay.buttonHeight=parseInt(e.overlay.buttonHeight,10),e.overlay.buttonHeight=e.overlay.buttonHeight>0?e.overlay.buttonHeight:null,e.overlay.buttonExpandBy=e.overlay.buttonExpandBy||100,e.overlay.buttonExpandDuration=e.buttonExpandDuration||180,e.overlay.buttonContractDuration=e.buttonContractDuration||180,e.overlay.buttonExpandEasing=e.overlay.buttonExpandEasing||"linear",e.overlay.buttonExpandEasing=e.overlay.buttonContractEasing||"linear",e.overlay.buttonFontColor=e.overlay.buttonFontColor||"#FFF",e.overlay.buttonFontSize=e.overlay.buttonFontSize||null,e.overlay.buttonAnimated=e.overlay.buttonAnimated&&e.overlay.buttonAnimated==="true"||e.overlay.buttonAnimated===!0?!0:!1,e.overlay.buttonPaddingTopBottom=parseInt(e.overlay.buttonPaddingTopBottom,10)||10,e.overlay.buttonPaddingLeftRight=parseInt(e.overlay.buttonPaddingLeftRight,10)||10,e.overlay.vodBumperPath=e.overlay.vodBumperPath||null,e.overlay.vodBumperHeight=e.overlay.vodBumperHeight||null,e.overlay.liveBumperPath=e.overlay.liveBumperPath||null,e.overlay.liveBumperHeight=e.overlay.liveBumperHeight||null,e.overlay.bumperDefault=e.overlay.bumperDefault||null,e.overlay.buttonPlayIcon=e.overlay.buttonPlayIcon||"http://graphics8.nytimes.com/images/video/playbutton_arrow.png",e.overlay.spinnerIcon=e.overlay.spinnerIcon||"http://graphics8.nytimes.com/images/video/spinner-dark.gif",e.overlay.position=e.overlay.buttonPosition||"center",e.overlay.padding=parseInt(e.overlay.padding,10)||0,e.notification=e.notification||"none",e.adxKeywords=e.adxKeywords||null,e.loadVideoPosterAssets=e.loadVideoPosterAssets===!1?!1:!0,e.adDurationBeforeSkippable=e.adDurationBeforeSkippable||null,e.skippableAdDuration=e.skippableAdDuration||30,e},o=function(e){if(!e)throw new Error("Empty configuration. Please paramertize the video instance.");if(!e.container)throw new Error(["Missing required property: props.container. ","Please specify the container id or HTMLElement"].join(""));if(!e.playerId)throw new Error(["Missing required property: props.playerId. ","Please contact the video team for an ID"].join(""));if(!e.playerType)throw new Error(["Missing required parameter: props.playerType. ","The playerType is used for tracking purposes and indicates ","the type of player being tracked: eg: Homepage, article, etc"].join(""));return e.id||(e.id=[(new Date).getTime(),"_nytd_vid_player"].join("")),!0};this.loadDependencies=function(e){if(this.BC_ASSETS_LOADED===!0){if(!e)return!0;e(!0)}else if(this.BC_ASSETS_LOADED_IN_PROGRESS)this.BC_ASSETS_LOADED_QUEUE.push(e);else{this.BC_ASSETS_LOADED_QUEUE.push(e),this.BC_ASSETS_LOADED=!1,this.BC_ASSETS_LOADED_IN_PROGRESS=!0;var n=[{src:NYTD.Video.Libs.Underscore,type:"_"},{src:NYTD.Video.Libs.Backbone,type:"Backbone"},{src:NYTD.Video.Libs.Brightcove,type:"BrightcoveExperience"},{src:NYTD.Video.Libs.VideoManager,type:"VideoManager"}],r=this;NYTD.Video.Utils.loadDependencies(n,function(e){r.BC_ASSETS_LOADED=!0,r.BC_ASSETS_LOADED_IN_PROGRESS=!1,t.call(r,e)})}},this.loadBCAssets=function(e){this.loadDependencies(e)},this.create=function(e){o(e),e=s(e);var t=e.type?e.type:null,u=this.videoManager.create(t),a=this;typeof e.container=="string"&&(e.container=document.getElementById(e.container)),e.matchContainerSize&&e.container.width&&e.container.height&&(e.width=e.container.style.width||e.container.width,e.height=e.container.style.height||e.container.height);var f=i(e);e.flashVars&&f.push({name:"flashVars",value:e.flashVars}),u.setContainer(e.container);var l=[this.PREFIX,e.id].join("");return u.setObjectId(l),u.setObjectClass(e.objectClass),u.setEnableInitialBandwidthDetection(e.enableInitialBandwidthDetection),u.setConnectOnLoad(e.connectOnLoad),u.setParams(f),u.setProps(e),e.embedCode&&u.setEmbedCode(e.embedCode),e.shareURL&&u.setSocialURL(e.shareURL),e.videoIds&&u.setVideoIds(e.videoIds),!NYTD.Video.Validation.isEmpty(e.overlay)&&!NYTD.Video.Validation.isEmpty(e.overlay.backgroundImage)?u.setPoster():(e.autoPosterFrame&&!e.autoStart&&!e.autoRender||!e.autoStart&&e.autoRender)&&u.type==="html5"&&u.setAutoPoster(),r(e,u),n(e,u),u.getSubscription().subscribe(NYTD.Video.VideoEvents.DESTROYING,function(e){var t=e.id;a.instances[t]&&(a.instances[t]=null)}),e.autoRender&&u.render(),this.instances[l]=u,u};var u=function(e){};return this.get=function(e){e=[this.PREFIX,e].join("");var t=this.instances[e];return t?t:null},this}.call(NYTD.Video.Factory));